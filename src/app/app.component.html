<div class="container">
  <h1>Gestion de compte</h1>

</div>

<div class="container">

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <button (click)="onFiltrerMois()" class="btn btn-outline-secondary" type="button">Valider</button>
    </div>
    <select [(ngModel)]="mois" name="mois" class="custom-select" id="inputGroupSelect03">Mois
      
      <option value="1">Janvier</option>
      <option value="2">Février</option>
      <option value="3">Mars</option>
      <option value="4">Avril</option>
      <option value="5">Mai</option>
      <option value="6">Juin</option>
      <option value="7">Juillet</option>
      <option value="8">Août</option>
      <option value="9">Septembre</option>
      <option value="10">Octobre</option>
      <option value="11">Novembre</option>
      <option value="12">Décembre</option>
      <option value="13">Tous</option>

    </select>
  </div>
  <div class="row">
    <form class="col-8" (ngSubmit)="onAjouter(a)" #a="ngForm">


      <table class="table table-striped table-bordered table-hover table-sm">
        <thead class="table-primary">
          <tr>
            <th class="col-4">Description</th>
            <th class="col-2">Date</th>
            <th class="col-3">Catégorie</th>
            <th class="col-1">Débit</th>
            <th class="col-1">Crédit</th>
            <th class="col-1"></th>
          </tr>
        </thead>
        <tr>
          <td class="col-4"><input type="text" name="description" ngModel placeholder="Description"></td>
          <td class="col-2"><input type="date" name="date" ngModel placeholder="Date"></td>
          <td class="col-2">
            <select style="width:150px" name="categorie" ngModel placeholder="Catégorie">
              <option *ngFor="let c of tabCategorie" value="{{c.nomCategorie}}">{{c.nomCategorie}}</option>

            </select></td>
          <td class="col-1"><input style="width:65px" type="number" name="debit" ngModel placeholder="Débit"></td>
          <td class="col-1"><input style="width:65px" type="number" name="credit" ngModel placeholder="Crédit"></td>

          <td class="col-2"><button type="submit" class=" btn btn-primary"> <i class="fa fa-plus"
                aria-hidden="true"></i>
            </button></td>

        </tr>
        <tbody>
          <tr *ngFor="let o of tabMois; let i = index">
            <td class="col-4">{{ o.description }}</td>
            <td class="col-2">{{ o.date }}</td>
            <td class="col-2">{{ o.categorie }}</td>

            <td class="col-1">{{ o.debit }}</td>
            <td class="col-1">{{ o.credit }}</td>
            <td class="col-2"><button *ngIf="mois == 13" type="button" class=" btn btn-danger" (click)="onDelete(i)"><i
                  class="fa fa-minus" aria-hidden="true"></i>
              </button></td>
          </tr>
        </tbody>
      </table>

    </form>
    <div class="col-4">
      <table class="table  table-bordered  ">
        <thead class="table-primary">
          <tr>
            <th class="col-6">Catégorie</th>
            <th class="col-3">Budget</th>
            <th class="col-3">Réel</th>
          </tr>
        </thead>

        <tbody>
          <tr class="alert alert-success " *ngFor="let c of tabCategorie; let i = index"
            [ngClass]="{'alert alert-danger' : c.budget<depenseParCategorie(c.nomCategorie)}">
            <td>{{ c.nomCategorie }}</td>
            <td>{{ c.budget }}</td>
            <td>{{depenseParCategorie(c.nomCategorie)}}</td>
            <td class="col-2"><button type="submit" class=" btn btn-danger" (click)="onDeleteCat(i)"><i
                  class="fa fa-minus" aria-hidden="true"></i>
              </button></td>


          </tr>
          <tr>
            <td><input style="width:100px" type="text" [(ngModel)]="nomCategorie" placeholder="Catégorie"></td>
            <td><input style="width:100px" type="number" [(ngModel)]="budget" placeholder="Budget"></td>
            <td><button (click)="onAjouterCategorie()" type="submit" class=" btn btn-primary"> <i class="fa fa-plus"
                  aria-hidden="true"></i>
              </button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>